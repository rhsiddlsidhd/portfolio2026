name: Claude Code Review

on:
  pull_request:
    types: [labeled]

jobs:
  claude-review-caller:
    if: github.event.label.name == 'claude-review'
    permissions:
      contents: read
      issues: write
      pull-requests: write
      id-token: write
    uses: rhsiddlsidhd/central-ops/.github/workflows/on-pull-request-claude-code-review.yml@main
    secrets:
      APP_ID: ${{ secrets.APP_ID }}
      APP_PRIVATE_KEY: ${{ secrets.APP_PRIVATE_KEY }}
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
